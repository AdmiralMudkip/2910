<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Frantic Frigate</title>
    </head>
    <body>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    
    <script>
        var context;
   window.onload = function() {
        var canvas = document.getElementById("canvas"); // grabs the canvas element
        context = canvas.getContext("2d");
        var img = document.getElementById("highscores");
        
        context.drawImage(img,0,0,1280,720); // draws the image at the specified x and y location
        }
        
        var i,j;
        var scores;
        
        // ctx.topScores is defined in the setup() function and is used to cache and display the fetched results.

// Get a number of top scores
var getTopScores = function(ctx, callback, context) {
	console.log('pulling scores');
	
var obj;
	$.ajax({
        
		type: 'GET',
		dataType: 'json',
		url: 'https://highscore2910.herokuapp.com/scores/',
		success: function(data) {
			console.log('Scores downloaded', data);
			
            
            findScores(data, context);
            var info = data;
            obj = JSON.parse(data);
			if (callback) callback();
		},
		error: function(xhr, msg) {
			console.error('AJAX error', xhr.status, msg);
		}
	});
    return obj;
};
console.log(scores);
// Post a score
var postScore = function(ctx, name, time, callback) {
	console.log('Posting score', name, time);

	$.ajax({
		type: 'POST',
		url: 'https://highscore2910.herokuapp.com/scores/',
		data: {
			name: name,
			time: time,
		},
		success: function(data) {
			console.log('Score posted', data);
			if (callback) callback();
		},
		error: function(xhr, msg) {
			console.error('AJAX error', xhr.status, msg);
		}
	});

};
    
        var external = getTopScores(context);
        //function findScores(input, context) {
        console.log('ayy');
        console.log(external);
    //for (var i = 0; i < input.length; i++) {
    //console.log("PAIR " + i + ": " + input[i].name);
    //console.log("PAIR " + i + ": " + input[i].time);
     //   context.fillText(input[i].time, 100, 100);
     //       } 
            
     //   }
        
    </script>
    <canvas id="canvas" width="1280" height="720"></canvas>
    <img src = "images/scores1280.jpg" id="highscores" style="display:none">
    </body>
</html>